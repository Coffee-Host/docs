---
title: Paper 全域設定
description: 了解並修改 paper-global.yml，啟用 Minecraft 原版特性如 TNT 複製等生電機制
---

import { Callout } from "fumadocs-ui/components/callout";
import { Step, Steps } from "fumadocs-ui/components/steps";
import Image from "next/image";

<Callout title="什麼是 Paper 設定檔？">
Paper 伺服器有自己的設定檔，可以控制許多 **Minecraft 原版特性的開關**。Paper 為了優化效能，預設關閉了一些原版特性，但您可以手動開啟它們。
</Callout>

<Callout type="info" title="適用範圍">
此教學適用於 **Paper、Purpur、Pufferfish** 等基於 Paper 的伺服器核心。
如果您使用 Spigot，請參考 `spigot.yml`。
</Callout>

# 設定檔位置

Paper 伺服器有兩個主要設定檔，位於 `config` 資料夾中：

| 設定檔 | 用途 |
|--------|------|
| `config/paper-global.yml` | **全域設定** - 適用於整個伺服器 |
| `config/paper-world-defaults.yml` | **世界設定** - 適用於所有世界的預設值 |

<Callout type="info">
如果找不到 `config` 資料夾，請先啟動一次伺服器，它會自動生成。
</Callout>

# 修改設定檔

<Steps>
    <Step>

    ### 步驟一：關閉伺服器

    建議先關閉伺服器，以確保設定正確儲存。

    </Step>

    <Step>

    ### 步驟二：開啟設定檔

    1. 前往面板的「**檔案管理**」頁面
    2. 進入 `config` 資料夾
    3. 點擊要編輯的設定檔

    <Image src="/images/practice/paper-global/open.png" alt="開啟設定檔" width={800} height={600} />

    </Step>

    <Step>

    ### 步驟三：修改設定

    找到對應的設定項目，修改其值。

    <Image src="/images/practice/paper-global/edit.png" alt="修改設定" width={800} height={600} />

    </Step>

    <Step>

    ### 步驟四：儲存並重啟

    儲存設定檔後，重新啟動伺服器。

    <Callout type="info">
    部分設定可用 `/paper reload` 重新載入，但建議重啟伺服器確保生效。
    </Callout>

    </Step>

</Steps>

# 🔧 生電特性設定

Paper 為了優化效能，**預設關閉了一些原版特性**。如果您是生電玩家或想要還原原版行為，可以開啟這些設定。

<Callout type="info" title="什麼是生電？">
生電（生存電路）是指在 Minecraft 生存模式下，使用紅石電路製作自動化農場、複製機等機器的玩法。許多生電機制依賴 Minecraft 的特殊行為（bug），Paper 預設會修復這些行為。
</Callout>

## 🧨 TNT 複製（活塞複製 TNT）

**用途：** 無限複製 TNT，用於 TNT 複製機、炸石機等

**原理：** 利用活塞推動 TNT 時的特性，讓一個 TNT 變成兩個

**設定位置：** `config/paper-world-defaults.yml`

```yaml
entities:
  spawning:
    duplicate-uuid:
      mode: SAFE_REGEN    # ← 預設值
```

**啟用方式：** 將 `mode` 改為 `NOTHING`

```yaml
entities:
  spawning:
    duplicate-uuid:
      mode: NOTHING       # ← 允許 TNT 複製
```

| mode 值 | 效果 |
|---------|------|
| `SAFE_REGEN` | 預設，會阻止 TNT 複製 |
| `NOTHING` | 允許 TNT 複製 |
| `DELETE` | 刪除重複的實體 |
| `WARN` | 只顯示警告 |

<Callout type="warn" title="其他複製機制">
在較新版本的 Paper 中，鐵軌複製、地毯複製、沙子複製等設定已被移除或整合到其他設定中。如果您需要這些功能，可以考慮：
- 使用 Purpur 等其他伺服器核心
- 使用特定的插件來實現
- 查看 `unsupported-settings.allow-permanent-block-break-exploits` 設定
</Callout>

## 🪨 床岩破壞與活塞複製

**用途：** 允許玩家使用活塞機器破壞床岩和進行活塞複製

**設定位置：** `config/paper-global.yml`

```yaml
unsupported-settings:
  allow-headless-pistons: false              # ← 預設值
  allow-piston-duplication: false            # ← 預設值
  allow-permanent-block-break-exploits: false # ← 預設值
```

**啟用方式：** 將這些值改為 `true`

```yaml
unsupported-settings:
  allow-headless-pistons: true               # ← 允許無頭活塞
  allow-piston-duplication: true             # ← 允許活塞複製
  allow-permanent-block-break-exploits: true # ← 允許永久方塊破壞漏洞
```

<Callout type="warn" title="不支援的設定">
這些設定位於 `unsupported-settings` 區塊中，代表 Paper 官方**不支援且不建議**使用。啟用這些設定可能會：
- 導致遊戲機制異常
- 破壞遊戲平衡
- 在未來版本中被移除或變更

請謹慎評估後再啟用！
</Callout>

# 📋 完整生電設定範例

如果您想一次啟用所有生電特性，請按照以下設定：

**config/paper-world-defaults.yml**

```yaml
entities:
  spawning:
    duplicate-uuid:
      mode: NOTHING                    # 允許 TNT 複製
```

**config/paper-global.yml**

```yaml
unsupported-settings:
  allow-headless-pistons: true               # 允許無頭活塞
  allow-piston-duplication: true             # 允許活塞複製
  allow-permanent-block-break-exploits: true # 允許永久方塊破壞漏洞
```

<Callout type="warn" title="效能警告">
⚠️ 啟用這些特性可能會影響伺服器效能，特別是：
- 大量使用 TNT 複製機
- 大型自動化農場
- 多人同時使用複製機

請根據伺服器的實際情況決定是否啟用。
</Callout>

# ⚡ 效能優化設定

Paper 提供許多效能優化選項，以下是常用的設定：

## 區塊系統設定

**設定位置：** `config/paper-global.yml`

```yaml
chunk-system:
  gen-parallelism: default    # 區塊生成並行度
  io-threads: -1              # IO 執行緒數（-1 = 自動）
  worker-threads: -1          # 工作執行緒數（-1 = 自動）
```

<Callout type="info">
預設的 `-1` 表示自動偵測，通常不需要修改。
</Callout>

## 反作弊設定

**設定位置：** `config/paper-world-defaults.yml`

```yaml
anticheat:
  anti-xray:
    enabled: false            # 反透視（效能消耗較大）
```

| 設定 | 效果 |
|------|------|
| `enabled: true` | 啟用反透視，礦物會被假方塊遮蓋 |
| `enabled: false` | 關閉反透視，效能較好 |

# 📝 訊息自訂

您可以自訂 Paper 的系統訊息：

**設定位置：** `config/paper-global.yml`

```yaml
messages:
  kick:
    authentication-servers-down: "無法驗證您的帳號，Mojang 伺服器可能故障中"
    connection-throttle: "連線過於頻繁，請稍後再試"
    flying-player: "禁止飛行！"
    flying-vehicle: "禁止載具飛行！"
```

# 🔍 常用指令

| 指令 | 說明 |
|------|------|
| `/paper reload` | 重新載入 Paper 設定（部分設定需重啟） |
| `/paper version` | 查看 Paper 版本 |
| `/paper dumpplugins` | 輸出插件資訊（除錯用） |
| `/paper mobcaps` | 查看生物生成上限 |
| `/paper playermobcaps` | 查看玩家周圍的生物上限 |

# 📚 相關資源

- [Paper 官方文件](https://docs.papermc.io/paper)
- [Paper 設定檔完整參考](https://docs.papermc.io/paper/reference/configuration)

<Callout type="info">
Paper 的設定檔結構可能會隨版本更新而變化，建議查閱官方文件以獲取最新資訊。
</Callout>
