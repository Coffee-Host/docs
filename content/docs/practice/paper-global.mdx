---
title: Paper 全域設定
description: 了解並修改 paper-global.yml，啟用 Minecraft 原版特性如 TNT 複製、鐵軌複製等
---

import { Callout } from "fumadocs-ui/components/callout";
import { Step, Steps } from "fumadocs-ui/components/steps";

<Callout title="什麼是 paper-global.yml？">
`paper-global.yml` 是 Paper 伺服器的全域設定檔，可以控制許多 Minecraft 原版特性的開關，包含一些被 Paper 優化而關閉的特性。
</Callout>

<Callout type="info">
此設定檔僅適用於 Paper、Purpur 等基於 Paper 的伺服器核心。Spigot 伺服器請參考 `spigot.yml`。
</Callout>

# 設定檔位置

Paper 伺服器的設定檔位於：
- `config/paper-global.yml` - 全域設定（適用於所有世界）
- `config/paper-world-defaults.yml` - 世界預設設定

# 修改設定檔

<Steps>
    <Step>

    ### 關閉伺服器

    在修改設定檔之前，建議先關閉伺服器，以確保設定正確儲存。

    </Step>

    <Step>

    ### 開啟設定檔

    1. 前往面板的「檔案管理」頁面
    2. 進入 `config` 資料夾
    3. 點擊 `paper-global.yml` 開啟編輯器

    ![開啟設定檔](/images/practice/paper-global/open.png)

    </Step>

    <Step>

    ### 修改設定

    根據需求修改相關設定（詳見下方設定說明）。

    ![修改設定](/images/practice/paper-global/edit.png)

    </Step>

    <Step>

    ### 儲存並重啟

    儲存設定檔後，重新啟動伺服器以套用變更。

    <Callout type="info">部分設定可以使用 `/paper reload` 指令重新載入，但建議重啟伺服器以確保所有設定生效。</Callout>

    </Step>

</Steps>

# 原版特性設定

Paper 為了優化效能，預設關閉了一些原版 Minecraft 的特性。如果您需要這些特性（例如生電玩家常用的機制），可以在設定檔中啟用。

## TNT 複製（活塞複製 TNT）

TNT 複製是利用活塞推動 TNT 時的特性來無限複製 TNT，常用於生電伺服器的自動化農場。

**設定位置：** `config/paper-global.yml`

```yaml
block-updates:
  disable-noteblock-updates: false
  disable-tripwire-updates: false
```

**設定位置：** `config/paper-world-defaults.yml`

```yaml
entities:
  spawning:
    duplicate-uuid:
      mode: SAFE_REGEN    # 改為 NOTHING 以允許 TNT 複製
      safe-regen-delete-range: 32
```

<Callout type="warn" title="重要設定">
要啟用 TNT 複製，需要將 `duplicate-uuid.mode` 設定為 `NOTHING`：

```yaml
entities:
  spawning:
    duplicate-uuid:
      mode: NOTHING
```
</Callout>

## 鐵軌複製（地毯複製）

鐵軌複製和地毯複製是利用活塞的特性來複製這些物品。

**設定位置：** `config/paper-world-defaults.yml`

```yaml
blocks:
  pistons:
    block-destroy-duplication: true    # 改為 false 以允許複製
```

要啟用鐵軌/地毯複製：

```yaml
blocks:
  pistons:
    block-destroy-duplication: false
```

## 重力方塊複製（沙子複製）

重力方塊複製可以複製沙子、礫石、混凝土粉末等方塊。

**設定位置：** `config/paper-world-defaults.yml`

```yaml
blocks:
  falling-block:
    gravity-duplication-bug: true    # 改為 true 以允許沙子複製
```

<Callout type="info">此設定預設為 `false`，設定為 `true` 即可啟用沙子複製。</Callout>

## 床岩破壞

允許玩家使用活塞破壞床岩。

**設定位置：** `config/paper-world-defaults.yml`

```yaml
blocks:
  pistons:
    allow-headless-pistons: true     # 允許無頭活塞
    allow-piston-duplication: true   # 允許活塞複製
```

# 效能相關設定

## 區塊載入設定

**設定位置：** `config/paper-global.yml`

```yaml
chunk-system:
  gen-parallelism: default
  io-threads: -1
  worker-threads: -1
```

| 設定名稱 | 說明 |
|----------|------|
| `gen-parallelism` | 區塊生成並行度，`default` 為自動 |
| `io-threads` | IO 執行緒數，`-1` 為自動 |
| `worker-threads` | 工作執行緒數，`-1` 為自動 |

## 訊息設定

**設定位置：** `config/paper-global.yml`

```yaml
messages:
  kick:
    authentication-servers-down: "無法驗證您的帳號，請稍後再試。"
    connection-throttle: "連線過於頻繁，請稍後再試。"
    flying-player: "不允許飛行！"
    flying-vehicle: "不允許載具飛行！"
```

# 完整設定範例

以下是啟用常見生電特性的設定範例：

**config/paper-world-defaults.yml**

```yaml
entities:
  spawning:
    duplicate-uuid:
      mode: NOTHING                    # 允許 TNT 複製

blocks:
  pistons:
    block-destroy-duplication: false   # 允許鐵軌/地毯複製
    allow-headless-pistons: true       # 允許無頭活塞
    allow-piston-duplication: true     # 允許活塞複製
  falling-block:
    gravity-duplication-bug: true      # 允許沙子複製
```

<Callout type="warn" title="效能警告">
啟用這些特性可能會影響伺服器效能，特別是在大量使用複製機時。請根據伺服器的實際情況決定是否啟用。
</Callout>

# 常用指令

| 指令 | 說明 |
|------|------|
| `/paper reload` | 重新載入 Paper 設定檔 |
| `/paper version` | 查看 Paper 版本資訊 |
| `/paper dumpplugins` | 輸出插件資訊 |

# 相關資源

- [Paper 官方文件](https://docs.papermc.io/paper)
- [Paper 設定檔參考](https://docs.papermc.io/paper/reference/configuration)

<Callout type="info">
Paper 的設定檔結構可能會隨版本更新而變化，建議查閱官方文件以獲取最新資訊。
</Callout>
