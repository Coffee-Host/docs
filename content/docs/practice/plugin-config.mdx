---
title: 插件設定
description: 學習如何修改插件的設定檔
---

import { Callout } from "fumadocs-ui/components/callout";
import { Step, Steps } from "fumadocs-ui/components/steps";

<Callout title="適用對象">本教學適合想要自訂插件功能的伺服器管理員。</Callout>

# 什麼是設定檔？

大多數插件都會有設定檔（Config），讓您可以自訂插件的各項功能。設定檔通常是 `.yml` 格式，位於 `plugins/插件名稱/` 資料夾中。

常見的設定檔：
- `config.yml` - 主要設定檔
- `messages.yml` - 訊息文字設定
- `lang.yml` 或 `locale/` - 語言設定

# 設定檔基礎知識

### YAML 格式說明

設定檔使用 YAML 格式，以下是基本語法：

```yaml
# 這是註解，不會影響設定
setting-name: value      # 設定名稱: 設定值

# 巢狀設定
parent:
  child: value           # 注意縮排（2個空格）
  another-child: value

# 列表
list:
  - item1
  - item2
  - item3

# 布林值
enabled: true            # 啟用
disabled: false          # 停用
```

<Callout type="warn" title="注意事項">
- YAML 對縮排非常敏感，請使用空格而非 Tab
- 冒號後面必須有一個空格
- 字串如果包含特殊字符，需要用引號包起來
</Callout>

# 修改設定檔教學

<Steps>
    <Step>

    ### 找到設定檔位置

    1. 前往面板的「檔案管理」頁面
    2. 進入 `plugins` 資料夾
    3. 找到您要修改的插件資料夾
    4. 點擊 `config.yml` 開啟編輯

    ![找到設定檔](/images/practice/plugin-config/locate.png)

    <Callout type="info">設定檔在插件首次載入後才會生成。如果找不到設定檔，請先啟動一次伺服器。</Callout>

    </Step>

    <Step>

    ### 了解設定內容

    開啟設定檔後，仔細閱讀註解說明。大多數設定檔都有詳細的註解解釋每個選項的用途。

    ![設定檔內容](/images/practice/plugin-config/content.png)

    如果註解是英文，可以使用翻譯工具或詢問 ChatGPT 了解設定的意義。

    </Step>

    <Step>

    ### 修改設定值

    根據您的需求修改設定值。以 CMI 為例：

    ```yaml
    # 修改前
    Tpa:
      Time: 60

    # 修改後（設定请求傳送超时時間為 120 秒）
    Tpa:
      Time: 120
    ```

    ![修改設定](/images/practice/plugin-config/edit.png)

    </Step>

    <Step>

    ### 儲存設定檔

    修改完成後，點擊「儲存」按鈕保存變更。

    ![儲存設定](/images/practice/plugin-config/save.png)

    </Step>

    <Step>

    ### 重新載入設定

    有兩種方式可以套用新設定：

    **方式一：重新啟動伺服器**
    - 最穩定的方式，適用於所有插件

    **方式二：使用指令重新載入**
    - 大多數插件支援 `/插件名稱 reload` 指令
    - 例如：`/cmi reload`、`/lp reload`

    ![重新載入](/images/practice/plugin-config/reload.png)

    </Step>

</Steps>

# 常見設定範例

### CMI 基礎設定

CMI 是一個功能強大的多合一插件，設定檔位於 `plugins/CMI/` 資料夾中。

**config.yml - 傳送設定**
```yaml
# 傳送相關設定
Teleportation:
  TeleportCooldown: 3          # 傳送冷卻時間（秒）
  TeleportDelay: 3             # 傳送延遲時間（秒）
  CancelOnMove: true           # 移動時取消傳送
  CancelOnDamage: true         # 受傷時取消傳送
```

**config.yml - 經濟設定**
```yaml
# 經濟系統設定
Economy:
  StartingBalance: 1000        # 新玩家起始金額
  MaxBalance: 10000000000000   # 最大金額上限
  MoneyFormat: '#,##0.00'      # 金錢顯示格式
```

**config.yml - 治療與飽食度**
```yaml
# 治療設定
Commands:
  Heal:
    Cooldown: 60               # 治療冷卻時間（秒）
  Feed:
    Cooldown: 60               # 餵食冷卻時間（秒）
```

### LuckPerms 基礎設定

```yaml
# 儲存方式
storage-method: H2             # 小型伺服器建議使用 H2
# storage-method: MySQL        # 大型伺服器建議使用 MySQL

# 預設群組
inheritance-default-group: default
```

### WorldGuard 區域保護

```yaml
# 全域設定
build: deny                    # 禁止建築
pvp: deny                      # 禁止 PvP
mob-spawning: deny             # 禁止怪物生成
```

# 設定檔錯誤排解

如果修改設定後插件無法正常運作，請檢查以下幾點：

### 常見錯誤

| 錯誤類型 | 症狀 | 解決方式 |
|----------|------|----------|
| 縮排錯誤 | 設定不生效或插件報錯 | 檢查縮排是否正確（使用空格） |
| 格式錯誤 | 插件無法載入 | 使用 [YAML 驗證器](https://www.yamllint.com/) 檢查格式 |
| 拼字錯誤 | 設定不生效 | 對照原始設定檔檢查拼字 |
| 數值類型錯誤 | 插件報錯 | 確認數值是否需要引號 |

### 使用 YAML 驗證器

1. 前往 [YAML Lint](https://www.yamllint.com/)
2. 將設定檔內容貼上
3. 檢查是否有語法錯誤

![YAML 驗證](/images/practice/plugin-config/yaml-lint.png)

### 還原預設設定

如果設定檔損壞無法修復：

1. 刪除或重新命名現有的 `config.yml`
2. 重新啟動伺服器
3. 插件會自動生成新的預設設定檔

<Callout type="info">建議在修改前先備份原始設定檔，以便需要時還原。</Callout>
